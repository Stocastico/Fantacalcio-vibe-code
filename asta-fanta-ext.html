<!doctype html>
<html lang="it">

<head>
    <meta charset="utf-8" />
    <title>Fantacalcio ‚Äì Helper d'Asta (offuscato)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Inline CSS (external file unavailable in current single-file workspace). If you later place this into style.css, replace this block with <link rel="stylesheet" href="style.css" /> -->
    <style>
        :root {
            font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
        }

        body {
            margin: 24px;
        }

        h1 {
            margin-bottom: 8px;
        }

        .muted {
            color: #666;
            font-size: 13px;
        }

        .pill {
            display: inline-block;
            padding: 4px 8px;
            margin: 2px;
            background: #f1f1f1;
            color: #555;
            border-radius: 12px;
            font-size: 12px;
            border: 1px solid #ddd;
        }

        .row {
            display: flex;
            gap: 8px;
            align-items: center;
            margin-top: 8px;
            flex-wrap: wrap;
        }

        .card {
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 16px;
        }

        .grid {
            display: grid;
            gap: 16px;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        }

        .warn {
            color: #9a3412;
        }

        .ok {
            color: #166534;
        }

        .out {
            margin-top: 10px;
            padding: 10px 12px;
            background: #f6f6f6;
            border-radius: 8px;
            min-height: 40px;
            white-space: pre-wrap;
        }

        label {
            font-size: 14px;
            display: block;
            margin-bottom: 6px;
            color: #333;
        }

        input[type=text],
        input[type=password],
        input[type=number] {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #ccc;
            border-radius: 8px;
        }

        button {
            padding: 10px 14px;
            border: 1px solid #222;
            border-radius: 8px;
            background: #111;
            color: #fff;
            cursor: pointer;
        }

        button.secondary {
            background: #fff;
            color: #111;
        }

        button:disabled {
            opacity: .6;
            cursor: not-allowed;
        }

        .layout {
            display: grid;
            gap: 16px;
            grid-template-columns: 1fr;
        }

        @media (min-width:980px) {
            .layout {
                grid-template-columns: 1fr 340px;
                align-items: start;
            }

            .sidebar {
                position: sticky;
                top: 12px;
            }
        }

        ul.list {
            list-style: none;
            padding-left: 0;
            margin: 8px 0 0;
        }

        ul.list li {
            padding: 6px 8px;
            border-bottom: 1px dashed #ddd;
        }

        .flash-add {
            animation: flashAdd 1.4s ease-out;
        }

        @keyframes flashAdd {
            0% {
                background: #ffeaa7;
            }

            60% {
                background: #fff;
            }

            100% {
                background: transparent;
            }
        }
    </style>
</head>

<body>
    <h1>Fantacalcio ‚Äì Helper d'Asta</h1>
    <p class="muted">
        Lista <strong>offuscata</strong> con passphrase. Non √® cifratura forte, ma scoraggia chi apre il sorgente.
    </p>

    <!-- BLOCCO SBLOCCO -->
    <div id="locked" class="card" style="max-width:580px;">
        <h3>Sblocca la lista</h3>
        <label for="pw">Passphrase</label>
        <input id="pw" type="password" placeholder="Inserisci passphrase" />
        <div class="row">
            <button id="btnUnlock">Sblocca</button>
        </div>
        <div id="outUnlock" class="out"></div>
        <p class="muted">Dopo lo sblocco, la pagina funziona offline come l'helper normale.</p>
    </div>

    <!-- APP -->
    <div id="app" style="display:none;">
        <div class="row">
            <span class="pill" id="countP">P: 0</span>
            <span class="pill" id="countD">D: 0</span>
            <span class="pill" id="countC">C: 0</span>
            <span class="pill" id="countA">A: 0</span>
            <span class="pill" id="sumNow">Somma tetti: 0</span>
            <span class="pill" id="budgetLeft">Crediti residui: 500</span>
        </div>

        <div class="layout" style="margin-top:16px;">
            <!-- SINISTRA: strumenti base -->
            <div>
                <div class="grid">
                    <!-- 1) CERCA -->
                    <section class="card">
                        <h3>1) Fai offerta per un giocatore</h3>

                        <!-- Random player selection -->
                        <div style="margin-bottom:16px;">
                            <p class="muted">Estrai un giocatore a caso dalla tua lista e inizia l'asta con offerta di 1
                                credito:</p>
                            <div class="row">
                                <button id="btnRandom">Estrai e inizia asta</button>
                                <button id="btnShowLeft" class="secondary">Mostra lista rimanente</button>
                                <button id="btnReset" class="secondary"
                                    title="Ripristina lista originale">Reset</button>
                            </div>
                            <div id="outRandom" class="out"></div>
                            <details id="leftWrap" style="display:none; margin-top:8px;">
                                <summary>Lista rimanente</summary>
                                <div id="leftList" class="muted"></div>
                            </details>
                        </div>

                        <!-- Separator -->
                        <div style="text-align:center; margin:20px 0; font-size:1.2em; font-weight:bold; color:#666;">
                            Oppure
                        </div>

                        <!-- Manual search -->
                        <div>
                            <label for="q">Nome giocatore</label>
                            <input id="q" type="text" placeholder="es. Lautaro, Dybala, Zaccagni..." />
                            <div class="row">
                                <button id="btnCheck">Cerca nella mia lista</button>
                                <button id="btnClear" class="secondary">Pulisci</button>
                            </div>
                            <div id="outCheck" class="out"></div>
                        </div>

                        <!-- Auction bidding section (hidden initially) -->
                        <div id="auctionSection"
                            style="display:none; margin-top:12px; padding:12px; background:#f0f8ff; border-radius:8px;">
                            <h4 style="margin-top:0;">üè∑Ô∏è Asta in corso</h4>
                            <div id="playerInfo" style="margin-bottom:8px; font-weight:bold;"></div>
                            <label for="currentOffer">Offerta attuale in asta</label>
                            <input id="currentOffer" type="number" inputmode="numeric" min="1" step="1"
                                placeholder="es. 25" />
                            <div class="row" style="margin-top:8px;">
                                <button id="btnCalculateBid">Calcola mia offerta</button>
                                <button id="btnPlayerWon" class="secondary">Giocatore acquisito</button>
                                <button id="btnPlayerLost" class="secondary">Giocatore andato</button>
                            </div>
                            <div id="outAuction" class="out"></div>
                        </div>

                        <p class="muted">Se il nome √® ambiguo oppure parziale, ti suggerisco i match possibili.</p>
                    </section>
                </div>
            </div>

            <!-- DESTRA: sidebar acquisti -->
            <aside class="sidebar">
                <section class="card">
                    <h3>Rosa acquistata</h3>
                    <p class="muted">Giocatori acquisiti tramite asta. Usa la sezione "Cerca giocatore e asta" per
                        aggiungere
                        nuovi acquisti.</p>

                    <ul id="purchasesList" class="list"></ul>

                    <div class="row" style="margin-top:12px;">
                        <span class="pill" id="spentPill">Speso: 0</span>
                        <span class="pill" id="leftPill">Residuo: 500</span>
                    </div>

                    <div class="row" style="margin-top:8px;">
                        <button id="btnUndoBuy" class="secondary">Annulla ultimo</button>
                        <button id="btnExportCSV" class="secondary">Esporta CSV</button>
                    </div>

                    <div id="outBuy" class="out"></div>
                </section>
            </aside>
        </div>

        <details class="card" style="margin-top:16px;">
            <summary>Avanzato: re-offusca con nuova passphrase</summary>
            <p class="muted">
                Dopo lo sblocco, puoi inserire una nuova passphrase e ottenere una stringa offuscata da sostituire nel
                file
                (variabile <code>OBF</code>).
                Questo non salva automaticamente: copia/incolla manualmente.
            </p>
            <label for="newpw">Nuova passphrase</label>
            <input id="newpw" type="password" placeholder="Nuova passphrase" />
            <div class="row">
                <button id="btnReObf">Genera nuova stringa offuscata</button>
            </div>
            <div id="outReObf" class="out"></div>
        </details>
    </div>

    <!-- Inline JS (external file not created due to workspace constraints). If you add app.js, move this block there and reference with <script src="app.js"></script> -->
    <script>
        // === DATA OBFUSCATA ===
        const OBF = "BueD+8FfsC3ZOorcIq9LSmWQDRmNoq2d16LwFFPBCl8U0IPHmG93hsGGpegbbhb+VONTWI+cY2TX2j0wlrciH/uOja/CW68t2U/BpzFuSj1t0wMxPYampSXNQOZdt1psF9GDx4JCbTfBeq3f2IYRWSzpA2V8oKZa74ooJaEFSWAa39Xugh5tfQ6EqZ3wbiD+LJBDYH9Ve2nn5fo/UwNJahCOm6+wYb5uBzpwnSi7SEEiqAM7PV9jmh7M8P5ixWUpJo7P7s1XbUXBaKXtH79F/iyQU2aHmGNy16zw8FP3UWHNppoKjG1teQCFqZ3wbiBLadUDIz2lsKQaigjmdbcUHw3Vxa+aKsg3Gjqy3COx/hYitUJrj5xjZNfaPTCWtyIf746Nr8Jbry3ZUMGnMW5KPW3TAzE9hqaqI9ExM532CinN3tD5xRSFLeM6cJ0YtUD+OqNeI5ZVr5kizfD+U+tJaRDeyq+MFL16C31mtdiQ/ggi0EpbPW11teHj8DKSAk0f5Y677tBirC3LOrbqIrH+FiKyAyM9laqc16ICQV0QCmsM2cavmhSYbvOHseQkrVX+LJBTZoeYY3LXq/DwU/dRYc2mlsLdHsYtDXmx4NiG/iJyz1VrgKaqWuGKQDOd+go3za+DuYJUtG/BUnW0M3hX/m7PTlw9bWN6FtQyJZ8PUR/XjtP8zFdtRcFbZqfYrkVAIqgSL5hfvFojyTspU88KTQzfwvnJVW03wYqz5xtuFv5DkA0ZfZylWu+ZBkFdEAprDNnGr5oUmHYHgbjcKMU9SiKaA2mKn6Za74oR5l23SmYPjpu+km93hsGGpegbbhb+QuBGan6coqYe1jfmXbdabBfRg8eCNW03wXqt39iGFFks6QNlfKCmWu+KFzCa+Aopzd7Q+cUUhS3iOnCdGLVA/jqjXiOWVa+ZIs3w/lPbTW8S4dT8zhR3LRGHsODYhv4fIpoDWYSXY3Lq5fo/UwNJahCOm6+sU8B/AIqzmwOtTlDDG09clVVtWifXOilTzwo+zZiD78lWbUXYSMGnMW5KPW3TAzE9d7qaFtQv5l23WmwX0YPHgjNtN8F6rd/YhhEMfZpcGYmUrp3XovAWkghYXg/b0/aCHm19DoSpnfBuHf4skENgf1V7bO3l+j9TA0lqEI6br7pTrm4Af7Lk2Hj+Tm/aRhlVVYJa4YowLZW3IjHh6Y0IgmCseAQ6fp0KrU5BbdcDIz2lsKQaigjmcrcUHw3Vxa+aJIGIy5Nm6Re5Qf46kC1skaiumiSK+uajBFRizaaDzoIebW0IfGa16HxZOQ==";

        // Utils
        async function sha256Bytes(str) { const enc = new TextEncoder().encode(str); const hash = await crypto.subtle.digest("SHA-256", enc); return new Uint8Array(hash); }
        function b64ToBytes(b64) { const bin = atob(b64); const out = new Uint8Array(bin.length); for (let i = 0; i < bin.length; i++)out[i] = bin.charCodeAt(i); return out; }
        function bytesToB64(bytes) { let bin = ""; for (let i = 0; i < bytes.length; i++)bin += String.fromCharCode(bytes[i]); return btoa(bin); }
        function deobfuscate(obf, key) { const out = new Uint8Array(obf.length); for (let i = 0; i < obf.length; i++)out[i] = (obf[i] - key[i % key.length] + 256) % 256; return out; }
        function obfuscate(plain, key) { const out = new Uint8Array(plain.length); for (let i = 0; i < plain.length; i++)out[i] = (plain[i] + key[i % key.length]) % 256; return out; }

        // State
        let ORIGINAL = null, roster = null; const START_BUDGET = 500; let purchases = []; let spent = 0; let currentAuctionPlayer = null; let lastSuggestedBid = null;
        const norm = s => (s || "").normalize("NFD").replace(/\p{Diacritic}/gu, "").toLowerCase().replace(/\s+/g, " ").trim();
        const sumBid = list => list.reduce((a, x) => a + (x.bid || 0), 0);
        const countsByRole = list => list.reduce((m, x) => (m[x.role] = (m[x.role] || 0) + 1, m), { P: 0, D: 0, C: 0, A: 0 });
        function updateCounters() { if (!roster) return; const c = countsByRole(roster); document.getElementById("countP").textContent = `P: ${c.P}`; document.getElementById("countD").textContent = `D: ${c.D}`; document.getElementById("countC").textContent = `C: ${c.C}`; document.getElementById("countA").textContent = `A: ${c.A}`; document.getElementById("sumNow").textContent = `Somma tetti: ${sumBid(roster)}`; document.getElementById("budgetLeft").textContent = `Crediti residui: ${START_BUDGET - spent}`; document.getElementById("spentPill").textContent = `Speso: ${spent}`; document.getElementById("leftPill").textContent = `Residuo: ${START_BUDGET - spent}`; }
        // Variante 'ext': non mostra il tetto massimo/prezzo stimato
        const formatPlayer = p => `${p.name} - ${p.role}`;
        function listRemaining() { const order = { P: 0, D: 1, C: 2, A: 3 }; return [...roster].sort((a, b) => (order[a.role] - order[b.role]) || (b.bid - a.bid) || a.name.localeCompare(b.name)).map(formatPlayer).join("\n"); }
        function findCandidates(q, inList = roster) { const s = norm(q); if (!s) return []; const exact = inList.filter(p => norm(p.name) === s); if (exact.length === 1) return exact; return inList.filter(p => norm(p.name).includes(s)); }

        function addPurchase(name, price) {
            const out = document.getElementById("outBuy");
            if (!name) { out.innerHTML = "‚ùå Nome mancante."; return false; }
            if (!Number.isFinite(price) || price < 0) { out.innerHTML = "‚ùå Prezzo non valido."; return false; }
            const priceInt = Math.round(price);
            const playerInList = ORIGINAL ? ORIGINAL.find(p => norm(p.name) === norm(name)) : null;
            if (!playerInList) { out.innerHTML = `‚ùå <span class="warn">"${name}" non √® nella tua lista originale di giocatori.</span>`; return false; }
            const already = purchases.find(p => norm(p.name) === norm(name));
            if (already) { out.innerHTML = `‚ùå <span class="warn">"${name}" gi√† acquistato (${already.price} crediti).`; return false; }
            if (spent + priceInt > START_BUDGET) { out.innerHTML = `‚ùå <span class="warn">Budget insufficiente. Residuo ${START_BUDGET - spent}, prezzo ${priceInt}.`; return false; }
            const over = playerInList.bid && priceInt > playerInList.bid;
            purchases.push({ name, price: priceInt });
            spent += priceInt;
            const li = document.createElement("li");
            li.textContent = `${name} - ${priceInt}` + (over ? ` (>${playerInList.bid})` : "");
            li.classList.add("flash-add");
            document.getElementById("purchasesList").appendChild(li);
            out.innerHTML = over ? `‚ö†Ô∏è Aggiunto "${name}" per ${priceInt}` : `‚úÖ Aggiunto "${name}" per ${priceInt}`;
            updateCounters();
            return li;
        }
        function undoPurchase() { const out = document.getElementById("outBuy"); if (purchases.length === 0) { out.innerHTML = "‚ö†Ô∏è Nessun acquisto da annullare."; return; } const last = purchases.pop(); spent -= last.price; const list = document.getElementById("purchasesList"); if (list.lastChild) list.removeChild(list.lastChild); out.innerHTML = `‚Ü©Ô∏è Annullato "${last.name}" per ${last.price}`; updateCounters(); }
        function exportCSV() { const out = document.getElementById("outBuy"); if (purchases.length === 0) { out.innerHTML = "‚ö†Ô∏è Nessun acquisto da esportare."; return; } const rows = [["Nome", "Prezzo"], ...purchases.map(p => [p.name, String(p.price)])]; rows.push(["Totale speso", String(spent)]); rows.push(["Residuo", String(START_BUDGET - spent)]); const csv = rows.map(r => r.map(x => `"${String(x).replace(/"/g, '""')}"`).join(",")).join("\n"); const blob = new Blob([csv], { type: "text/csv;charset=utf-8;" }); const url = URL.createObjectURL(blob); const a = document.createElement("a"); a.href = url; a.download = `acquisti_fantacalcio_${new Date().toISOString().slice(0, 10)}.csv`; document.body.appendChild(a); a.click(); document.body.removeChild(a); URL.revokeObjectURL(url); out.innerHTML = "üì¶ CSV esportato."; }
        const $ = sel => document.querySelector(sel);

        // Unlock
        $("#btnUnlock").addEventListener("click", async () => { const pw = $("#pw").value || ""; const out = $("#outUnlock"); try { const key = await sha256Bytes(pw); const obf = b64ToBytes(OBF); const plain = deobfuscate(obf, key); const text = new TextDecoder().decode(plain); const parsed = JSON.parse(text); if (!Array.isArray(parsed) || parsed.length === 0) throw new Error("Formato elenco non valido."); ORIGINAL = parsed; roster = JSON.parse(JSON.stringify(ORIGINAL)); $("#locked").style.display = "none"; $("#app").style.display = ""; updateCounters(); document.getElementById("leftList").textContent = listRemaining(); } catch (e) { console.error(e); out.innerHTML = "‚ùå <span class='warn'>Passphrase errata o dati corrotti.</span>"; } });

        // Click delegation
        document.addEventListener("click", ev => {
            const id = ev.target && ev.target.id; if (!id) return;
            if (id === "btnCheck") { const q = $("#q").value; const out = $("#outCheck"); const auctionSection = document.getElementById("auctionSection"); const matches = findCandidates(q); if (matches.length === 0) { out.innerHTML = `‚ùå <span class="warn">"${q}" non √® nella tua lista attuale.</span>`; auctionSection.style.display = "none"; currentAuctionPlayer = null; lastSuggestedBid = null; } else if (matches.length > 1) { out.textContent = `‚ö†Ô∏è Trovati pi√π match:\n- ${matches.map(m => m.name).join("\n- ")}`; auctionSection.style.display = "none"; currentAuctionPlayer = null; lastSuggestedBid = null; } else { const player = matches[0]; currentAuctionPlayer = player; lastSuggestedBid = null; out.innerHTML = `‚úÖ <span class="ok">${formatPlayer(player)}</span>`; document.getElementById("playerInfo").innerHTML = `<strong>${player.name}</strong> (${player.role})`; document.getElementById("currentOffer").value = ""; document.getElementById("outAuction").innerHTML = ""; auctionSection.style.display = "block"; } }
            if (id === "btnClear") { $("#q").value = ""; $("#outCheck").textContent = ""; document.getElementById("auctionSection").style.display = "none"; currentAuctionPlayer = null; lastSuggestedBid = null; $("#q").focus(); }
            if (id === "btnRandom") { const out = $("#outRandom"); if (!roster || roster.length === 0) { out.innerHTML = "‚ùå Lista vuota: nessun giocatore rimanente."; return; } const i = Math.floor(Math.random() * roster.length); const p = roster[i]; out.innerHTML = `üéØ <strong>${p.name}</strong> - ruolo ${p.role}`; currentAuctionPlayer = p; lastSuggestedBid = null; const auctionSection = document.getElementById("auctionSection"); document.getElementById("playerInfo").innerHTML = `<strong>${p.name}</strong> (${p.role})`; document.getElementById("currentOffer").value = "1"; document.getElementById("outAuction").innerHTML = ""; auctionSection.style.display = "block"; auctionSection.scrollIntoView({ behavior: "smooth" }); }
            if (id === "btnShowLeft") { const wrap = document.getElementById("leftWrap"); const list = document.getElementById("leftList"); if (wrap.style.display === "none") { list.textContent = listRemaining(); wrap.style.display = ""; } else wrap.style.display = "none"; }
            if (id === "btnReset") { if (!confirm("Ripristinare la lista originale (500 totali)?")) return; roster = JSON.parse(JSON.stringify(ORIGINAL)); updateCounters(); document.getElementById("leftList").textContent = listRemaining(); document.getElementById("outRandom").textContent = ""; document.getElementById("outCheck").textContent = ""; }
            if (id === "btnReObf") { const newpw = $("#newpw").value || ""; const out = $("#outReObf"); if (!newpw) { out.innerHTML = "‚ùå Inserisci una nuova passphrase."; return; } (async () => { try { const key = await sha256Bytes(newpw); const text = JSON.stringify(ORIGINAL); const plain = new TextEncoder().encode(text); const obf = obfuscate(plain, key); const b64 = bytesToB64(obf); out.innerHTML = "‚úÖ Nuova stringa OBF (copiala nel file sulla variabile <code>OBF</code>):\n\n" + b64; } catch (e) { console.error(e); out.innerHTML = "‚ùå Errore nella generazione."; } })(); }
            if (id === "btnUndoBuy") undoPurchase();
            if (id === "btnExportCSV") exportCSV();
            if (id === "btnCalculateBid") {
                if (!currentAuctionPlayer) return; const outAuction = document.getElementById("outAuction"); const val = document.getElementById("currentOffer").value || ""; if (!val) { outAuction.innerHTML = "‚ùå Inserisci l'offerta attuale."; return; } const currentOffer = Number(val); if (!Number.isFinite(currentOffer) || currentOffer < 1) { outAuction.innerHTML = "‚ùå Offerta non valida."; return; } const currentOfferInt = Math.round(currentOffer); const maxBid = currentAuctionPlayer.bid; if (currentOfferInt >= maxBid) { // lost
                    // remove from roster
                    const before = roster.length; roster = roster.filter(p => p.name !== currentAuctionPlayer.name); if (roster.length !== before) { updateCounters(); if (document.getElementById("leftWrap").style.display !== "none") document.getElementById("leftList").textContent = listRemaining(); }
                    outAuction.innerHTML = `üòû <strong>${currentAuctionPlayer.name}</strong> andato ad altri (raggiunto limite interno).`; lastSuggestedBid = null; setTimeout(() => { document.getElementById("auctionSection").style.display = "none"; currentAuctionPlayer = null; }, 2500);
                } else { const ourBid = currentOfferInt + 1; lastSuggestedBid = { player: currentAuctionPlayer.name, value: ourBid }; outAuction.innerHTML = `üí∞ <span class="ok">Offriamo: <strong>${ourBid}</strong> crediti</span>`; }
            }
            if (id === "btnPlayerWon") {
                if (!currentAuctionPlayer) return;
                const val = document.getElementById("currentOffer").value || "";
                const outAuction = document.getElementById("outAuction");
                if (!val) { outAuction.innerHTML = "‚ùå Inserisci il prezzo finale di acquisto."; return; }
                const base = Math.round(Number(val));
                if (!Number.isFinite(base) || base < 0) { outAuction.innerHTML = "‚ùå Prezzo non valido."; return; }
                // Usa il suggerimento calcolato (ourBid) se ancora valido, altrimenti assume base+1
                let finalPrice = base + 1;
                if (lastSuggestedBid && lastSuggestedBid.player === currentAuctionPlayer.name) finalPrice = lastSuggestedBid.value;
                const li = addPurchase(currentAuctionPlayer.name, finalPrice);
                if (li) {
                    const before = roster.length;
                    roster = roster.filter(p => norm(p.name) !== norm(currentAuctionPlayer.name));
                    if (roster.length !== before) {
                        updateCounters();
                        if (document.getElementById("leftWrap").style.display !== "none") document.getElementById("leftList").textContent = listRemaining();
                    }
                    outAuction.innerHTML = `üéâ <strong>${currentAuctionPlayer.name}</strong> acquisito, budget aggiornato e rimosso dalla lista rimanente.`;
                    li.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    setTimeout(() => li.classList.remove('flash-add'), 1600);
                    document.getElementById("auctionSection").style.display = "none";
                    currentAuctionPlayer = null;
                    lastSuggestedBid = null;
                } else {
                    outAuction.innerHTML = `‚ö†Ô∏è Verifica messaggi sotto la sezione acquisti: impossibile aggiungere <strong>${currentAuctionPlayer.name}</strong>.`;
                }
            }
            if (id === "btnPlayerLost") { if (!currentAuctionPlayer) return; const outAuction = document.getElementById("outAuction"); const before = roster.length; roster = roster.filter(p => p.name !== currentAuctionPlayer.name); if (roster.length !== before) { updateCounters(); if (document.getElementById("leftWrap").style.display !== "none") document.getElementById("leftList").textContent = listRemaining(); outAuction.innerHTML = `üòû <strong>${currentAuctionPlayer.name}</strong> andato ad altri e rimosso.`; } else { outAuction.innerHTML = `üòû <strong>${currentAuctionPlayer.name}</strong> andato ad altri.`; } setTimeout(() => { document.getElementById("auctionSection").style.display = "none"; currentAuctionPlayer = null; }, 1800); }
        });
    </script>

</body>

</html>